{% extends 'base.html' %}
{% load static %}
{% block body %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 text-white mt-5">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom mt-5">
      <h1 class="h2">Dashboard</h1>
    </div>
    <form method="POST" action="" id="keyregister">
        {% csrf_token %}
        {% for field in form %}
        <p>Enter a {{ field.label }}</p>
        <input style="background-color: #2e3338;" class="form-control border-0 text-white mb-1" type="" name="{{ field.name }}">
        {% endfor %}
        <button class="btn btn-info btn-sm border-0 mt-2" type="submit" name="submit">Add Key</button>
    </form>
    <br>
    {% for message in messages %}
    {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
    <div class="alert alert-success" role="alert">Subscription added!</div>
    {% else %}
    <div class="alert alert-danger d-flex align-items-center" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
        <div>
            Error! {{message}}
        </div>
    </div>
    {% endif %}
    {% endfor %}

    {% if form.errors %}
    {% for error, msg in form.errors.items %}
    <div class="alert alert-danger d-flex align-items-center" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
        <div>
            Error! {{msg}}
        </div>
        </div>
    {% endfor %}
    {% endif %}
    
    <h3 class="mt-5">Days left of subscription: {{days_left}}</h3>
    <!--
    <h2>Requests</h2>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
                <tr>
                    <th scope="col" class="text-white">Endpoint</th>
                    <th scope="col" class="text-white">Requests</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="text-white">triggered</td>
                    <td class="text-white">{{triggered}}</td>
                </tr>
                <tr>
                    <td class="text-white">blur</td>
                    <td class="text-white">{{blur}}</td>
                </tr>
                <tr>
                    <td class="text-white">pixelate</td>
                    <td class="text-white">{{pixelate}}</td>
                </tr>
                <tr>
                    <td class="text-white">flip</td>
                    <td class="text-white">{{flip}}</td>
                </tr>
                <tr>
                    <td class="text-white">rotate</td>
                    <td class="text-white">{{rotate}}</td>
                </tr>
                <tr>
                    <td class="text-white">grayscale</td>
                    <td class="text-white">{{grayscale}}</td>
                </tr>
                <tr>
                    <td class="text-white">blend</td>
                    <td class="text-white">{{blend}}</td>
                </tr>
                <tr>
                    <td class="text-white">enhance</td>
                    <td class="text-white">{{enhance}}</td>
                </tr>
                <tr>
                    <td class="text-white">invert</td>
                    <td class="text-white">{{invert}}</td>
                </tr>
                <tr>
                    <td class="text-white">grayscaleinvert</td>
                    <td class="text-white">{{grayscaleinvert}}</td>
                </tr>
                <tr>
                    <td class="text-white">emboss</td>
                    <td class="text-white">{{emboss}}</td>
                </tr>
                <tr>
                    <td class="text-white">contour</td>
                    <td class="text-white">{{contour}}</td>
                </tr>
                <tr>
                    <td class="text-white">edges</td>
                    <td class="text-white">{{edges}}</td>
                </tr>
                <tr>
                    <td class="text-white">sepia</td>
                    <td class="text-white">{{sepia}}</td>
                </tr>
                <tr>
                    <td class="text-white">colorfilter</td>
                    <td class="text-white">{{colorfilter}}</td>
                </tr>
                <tr>
                    <td class="text-white">gay</td>
                    <td class="text-white">{{gay}}</td>
                </tr>
                <tr>
                    <td class="text-white">urss</td>
                    <td class="text-white">{{urss}}</td>
                </tr>
                <tr>
                    <td class="text-white">jail</td>
                    <td class="text-white">{{jail}}</td>
                </tr>
                <tr>
                    <td class="text-white">missionpassed</td>
                    <td class="text-white">{{missionpassed}}</td>
                </tr>
                <tr>
                    <td class="text-white">wanted</td>
                    <td class="text-white">{{wanted}}</td>
                </tr>
                <tr>
                    <td class="text-white">wasted</td>
                    <td class="text-white">{{wasted}}</td>
                </tr>
                <tr>
                    <td class="text-white">busted</td>
                    <td class="text-white">{{busted}}</td>
                </tr>
                <tr>
                    <td class="text-white">simpcard</td>
                    <td class="text-white">{{simpcard}}</td>
                </tr>
                <tr>
                    <td class="text-white">hornylicense</td>
                    <td class="text-white">{{hornylicense}}</td>
                </tr>
                <tr>
                    <td class="text-white">hornylicense2</td>
                    <td class="text-white">{{hornylicense2}}</td>
                </tr>
                <tr>
                    <td class="text-white">whodidthis</td>
                    <td class="text-white">{{whodidthis}}</td>
                </tr>
                <tr>
                    <td class="text-white">colorviewer</td>
                    <td class="text-white">{{colorviewer}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <h3 class="mt-5">Current load: {{average}}%</h3>
    <h3>Total requests: {{total}}</h3>
    <h3>Average requests: {{average}}/min</h3>
    <h3 class="mb-5">Current uptime: {{uptime}}</h3>
-->
    <h3>Your token is: {{token}}</h3>
    <p>This page is saved into cache and all the data refreshes once every 5 minutes.</p>
</main>
{% endblock body %}